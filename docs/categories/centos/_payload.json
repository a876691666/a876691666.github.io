[{"data":1,"prerenderedAt":524},["ShallowReactive",2],{"category-data-centos":3},[4,237],{"id":5,"title":6,"body":7,"description":221,"extension":222,"meta":223,"navigation":232,"ogImage":225,"path":233,"seo":234,"stem":235,"__hash__":236},"content/blogs/china-install-docker.md","在国内云服务器上安装 Docker CE 的完整指南",{"type":8,"value":9,"toc":217},"minimark",[10,14,23,30,33,38,70,80,96,99,102,129,132,154,160,167,170,196,199,213],[11,12,13],"h3",{"id":13},"背景",[15,16,17,18,22],"p",{},"在国内的云服务器，无法直接安装 ",[19,20,21],"code",{},"docker-ce","。",[15,24,25,26,29],{},"官方 ",[19,27,28],{},"yum"," 源安装巨慢或者完全访问不到。",[11,31,32],{"id":32},"安装",[34,35,37],"h4",{"id":36},"首先安装工具","首先安装工具。",[39,40,45],"pre",{"className":41,"code":42,"language":43,"meta":44,"style":44},"language-bash shiki shiki-themes dracula","sudo yum install -y yum-utils\n","bash","",[19,46,47],{"__ignoreMap":44},[48,49,52,56,60,63,67],"span",{"class":50,"line":51},"line",1,[48,53,55],{"class":54},"sAOxA","sudo",[48,57,59],{"class":58},"s-mGx"," yum",[48,61,62],{"class":58}," install",[48,64,66],{"class":65},"sIQBb"," -y",[48,68,69],{"class":58}," yum-utils\n",[34,71,73,74,76,77,22],{"id":72},"然后增加docker-ce的官方-yum-源-repo","然后增加docker-ce的官方 ",[19,75,28],{}," 源 ",[19,78,79],{},"repo",[39,81,83],{"className":41,"code":82,"language":43,"meta":44,"style":44},"yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\n",[19,84,85],{"__ignoreMap":44},[48,86,87,90,93],{"class":50,"line":51},[48,88,89],{"class":54},"yum-config-manager",[48,91,92],{"class":65}," --add-repo",[48,94,95],{"class":58}," https://download.docker.com/linux/centos/docker-ce.repo\n",[15,97,98],{},"如果官方repo都访问不了，就从国内下载repo",[15,100,101],{},"阿里云:",[39,103,105],{"className":41,"code":104,"language":43,"meta":44,"style":44},"yum-config-manager \\\n    --add-repo \\\n    https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n",[19,106,107,115,123],{"__ignoreMap":44},[48,108,109,111],{"class":50,"line":51},[48,110,89],{"class":54},[48,112,114],{"class":113},"s0Tla"," \\\n",[48,116,118,121],{"class":50,"line":117},2,[48,119,120],{"class":65},"    --add-repo",[48,122,114],{"class":113},[48,124,126],{"class":50,"line":125},3,[48,127,128],{"class":58},"    https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n",[15,130,131],{},"清华大学:",[39,133,135],{"className":41,"code":134,"language":43,"meta":44,"style":44},"yum-config-manager \\\n    --add-repo \\\n    https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/centos/docker-ce.repo\n",[19,136,137,143,149],{"__ignoreMap":44},[48,138,139,141],{"class":50,"line":51},[48,140,89],{"class":54},[48,142,114],{"class":113},[48,144,145,147],{"class":50,"line":117},[48,146,120],{"class":65},[48,148,114],{"class":113},[48,150,151],{"class":50,"line":125},[48,152,153],{"class":58},"    https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/centos/docker-ce.repo\n",[15,155,156,157,22],{},"repo文件会被下载到 ",[19,158,159],{},"/etc/yum.repos.d/docker-ce.repo",[34,161,163,164,166],{"id":162},"替换更改-repo-文件中的地址","替换更改 ",[19,165,79],{}," 文件中的地址。",[15,168,169],{},"这里使用的是清华大学源",[39,171,173],{"className":41,"code":172,"language":43,"meta":44,"style":44},"sed -i 's+https://download.docker.com+https://mirrors.tuna.tsinghua.edu.cn/docker-ce+' /etc/yum.repos.d/docker-ce.repo\n",[19,174,175],{"__ignoreMap":44},[48,176,177,180,183,187,190,193],{"class":50,"line":51},[48,178,179],{"class":54},"sed",[48,181,182],{"class":65}," -i",[48,184,186],{"class":185},"seVfx"," '",[48,188,189],{"class":58},"s+https://download.docker.com+https://mirrors.tuna.tsinghua.edu.cn/docker-ce+",[48,191,192],{"class":185},"'",[48,194,195],{"class":58}," /etc/yum.repos.d/docker-ce.repo\n",[34,197,198],{"id":198},"更改地址后直接yum安装即可",[39,200,202],{"className":41,"code":201,"language":43,"meta":44,"style":44},"yum install docker-ce\n",[19,203,204],{"__ignoreMap":44},[48,205,206,208,210],{"class":50,"line":51},[48,207,28],{"class":54},[48,209,62],{"class":58},[48,211,212],{"class":58}," docker-ce\n",[214,215,216],"style",{},"html pre.shiki code .sAOxA, html code.shiki .sAOxA{--shiki-default:#50FA7B}html pre.shiki code .s-mGx, html code.shiki .s-mGx{--shiki-default:#F1FA8C}html pre.shiki code .sIQBb, html code.shiki .sIQBb{--shiki-default:#BD93F9}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .s0Tla, html code.shiki .s0Tla{--shiki-default:#FF79C6}html pre.shiki code .seVfx, html code.shiki .seVfx{--shiki-default:#E9F284}",{"title":44,"searchDepth":117,"depth":117,"links":218},[219,220],{"id":13,"depth":125,"text":13},{"id":32,"depth":125,"text":32},"在国内云服务器上安装Docker CE时经常遇到网络问题，本文提供了使用国内镜像源的完整解决方案。","md",{"date":224,"image":225,"alt":226,"tags":227,"published":232},"2023-08-01","/blogs-img/blog2.jpg","在国内云服务器安装Docker CE指南",[228,229,230,231],"docker","linux","centos","运维",true,"/blogs/china-install-docker",{"title":6,"description":221},"blogs/china-install-docker","6VXbRepK1bG4bT45TK69yQUHSDQ6EakI4qLmTgjZVtk",{"id":238,"title":239,"body":240,"description":512,"extension":222,"meta":513,"navigation":232,"ogImage":514,"path":520,"seo":521,"stem":522,"__hash__":523},"content/blogs/ecs-install-minio.md","在ECS上安装和部署MinIO S3存储服务",{"type":8,"value":241,"toc":507},[242,244,247,249,252,255,315,318,322,335,338,421,424,436,444,447,504],[11,243,13],{"id":13},[15,245,246],{},"尝试裸机部署minio，来代替AWS S3服务。",[11,248,32],{"id":32},[34,250,251],{"id":251},"下载二进制运行程序",[15,253,254],{},"这里使用的是 amd64 centos-stream-9 操作系统",[39,256,258],{"className":41,"code":257,"language":43,"meta":44,"style":44},"# MinIO Server\nwget https://dl.min.io/server/minio/release/linux-amd64/minio\nchmod +x minio\n\n# MinIO Client\nwget https://dl.min.io/client/mc/release/linux-amd64/mc\nchmod +x mc\n",[19,259,260,266,274,285,291,297,305],{"__ignoreMap":44},[48,261,262],{"class":50,"line":51},[48,263,265],{"class":264},"shSDL","# MinIO Server\n",[48,267,268,271],{"class":50,"line":117},[48,269,270],{"class":54},"wget",[48,272,273],{"class":58}," https://dl.min.io/server/minio/release/linux-amd64/minio\n",[48,275,276,279,282],{"class":50,"line":125},[48,277,278],{"class":54},"chmod",[48,280,281],{"class":58}," +x",[48,283,284],{"class":58}," minio\n",[48,286,288],{"class":50,"line":287},4,[48,289,290],{"emptyLinePlaceholder":232},"\n",[48,292,294],{"class":50,"line":293},5,[48,295,296],{"class":264},"# MinIO Client\n",[48,298,300,302],{"class":50,"line":299},6,[48,301,270],{"class":54},[48,303,304],{"class":58}," https://dl.min.io/client/mc/release/linux-amd64/mc\n",[48,306,308,310,312],{"class":50,"line":307},7,[48,309,278],{"class":54},[48,311,281],{"class":58},[48,313,314],{"class":58}," mc\n",[34,316,317],{"id":317},"创建service文件",[319,320,321],"h5",{"id":321},"server",[39,323,325],{"className":41,"code":324,"language":43,"meta":44,"style":44},"vim /usr/lib/systemd/system/minio.server.service\n",[19,326,327],{"__ignoreMap":44},[48,328,329,332],{"class":50,"line":51},[48,330,331],{"class":54},"vim",[48,333,334],{"class":58}," /usr/lib/systemd/system/minio.server.service\n",[15,336,337],{},"粘贴内容：",[39,339,343],{"className":340,"code":341,"language":342,"meta":44,"style":44},"language-ini shiki shiki-themes dracula","[Unit]\nDescription=S3存储\n\n[Service]\nWorkingDirectory=/data/minio\nType=simple\nUser=root\nGroup=root\nExecStart=/data/minio/minio server /data/minio/data --console-address \":9001\"\nRestart=always\nRestartSec=10\nSyslogIdentifier=minio-server\nEnvironment=MINIO_ROOT_USER=admin\nEnvironment=MINIO_ROOT_PASSWORD=RanDoMPAsSWoRD\n","ini",[19,344,345,350,355,359,364,369,374,379,385,391,397,403,409,415],{"__ignoreMap":44},[48,346,347],{"class":50,"line":51},[48,348,349],{},"[Unit]\n",[48,351,352],{"class":50,"line":117},[48,353,354],{},"Description=S3存储\n",[48,356,357],{"class":50,"line":125},[48,358,290],{"emptyLinePlaceholder":232},[48,360,361],{"class":50,"line":287},[48,362,363],{},"[Service]\n",[48,365,366],{"class":50,"line":293},[48,367,368],{},"WorkingDirectory=/data/minio\n",[48,370,371],{"class":50,"line":299},[48,372,373],{},"Type=simple\n",[48,375,376],{"class":50,"line":307},[48,377,378],{},"User=root\n",[48,380,382],{"class":50,"line":381},8,[48,383,384],{},"Group=root\n",[48,386,388],{"class":50,"line":387},9,[48,389,390],{},"ExecStart=/data/minio/minio server /data/minio/data --console-address \":9001\"\n",[48,392,394],{"class":50,"line":393},10,[48,395,396],{},"Restart=always\n",[48,398,400],{"class":50,"line":399},11,[48,401,402],{},"RestartSec=10\n",[48,404,406],{"class":50,"line":405},12,[48,407,408],{},"SyslogIdentifier=minio-server\n",[48,410,412],{"class":50,"line":411},13,[48,413,414],{},"Environment=MINIO_ROOT_USER=admin\n",[48,416,418],{"class":50,"line":417},14,[48,419,420],{},"Environment=MINIO_ROOT_PASSWORD=RanDoMPAsSWoRD\n",[319,422,423],{"id":423},"client",[39,425,427],{"className":41,"code":426,"language":43,"meta":44,"style":44},"vim /usr/lib/systemd/system/minio.client.service\n",[19,428,429],{"__ignoreMap":44},[48,430,431,433],{"class":50,"line":51},[48,432,331],{"class":54},[48,434,435],{"class":58}," /usr/lib/systemd/system/minio.client.service\n",[39,437,442],{"className":438,"code":440,"language":441},[439],"language-text","[Unit]\nDescription=S3存储 客户端\n\n[Service]\nWorkingDirectory=/data/minio\nType=simple\nUser=root\nGroup=root\nExecStart=mc alias set myminio/ //127.0.0.1 admin RanDoMPAsSWoRD\nRestart=always\nRestartSec=10\nSyslogIdentifier=minio-client\n","text",[19,443,440],{"__ignoreMap":44},[11,445,446],{"id":446},"运行",[39,448,450],{"className":41,"code":449,"language":43,"meta":44,"style":44},"systemctl daemon-reload\n\nsystemctl start minio.server.service\nsystemctl enable minio.server.service\n\nsystemctl start minio.client.service\nsystemctl enable minio.client.service\n",[19,451,452,460,464,474,483,487,496],{"__ignoreMap":44},[48,453,454,457],{"class":50,"line":51},[48,455,456],{"class":54},"systemctl",[48,458,459],{"class":58}," daemon-reload\n",[48,461,462],{"class":50,"line":117},[48,463,290],{"emptyLinePlaceholder":232},[48,465,466,468,471],{"class":50,"line":125},[48,467,456],{"class":54},[48,469,470],{"class":58}," start",[48,472,473],{"class":58}," minio.server.service\n",[48,475,476,478,481],{"class":50,"line":287},[48,477,456],{"class":54},[48,479,480],{"class":58}," enable",[48,482,473],{"class":58},[48,484,485],{"class":50,"line":293},[48,486,290],{"emptyLinePlaceholder":232},[48,488,489,491,493],{"class":50,"line":299},[48,490,456],{"class":54},[48,492,470],{"class":58},[48,494,495],{"class":58}," minio.client.service\n",[48,497,498,500,502],{"class":50,"line":307},[48,499,456],{"class":54},[48,501,480],{"class":58},[48,503,495],{"class":58},[214,505,506],{},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .shSDL, html code.shiki .shSDL{--shiki-default:#6272A4}html pre.shiki code .sAOxA, html code.shiki .sAOxA{--shiki-default:#50FA7B}html pre.shiki code .s-mGx, html code.shiki .s-mGx{--shiki-default:#F1FA8C}",{"title":44,"searchDepth":117,"depth":117,"links":508},[509,510,511],{"id":13,"depth":125,"text":13},{"id":32,"depth":125,"text":32},{"id":446,"depth":125,"text":446},"详细介绍如何在CentOS Stream 9系统上安装和配置MinIO服务，替代AWS S3存储方案",{"date":224,"image":514,"alt":239,"tags":515,"published":232},"/blogs-img/blog3.jpg",[516,517,230,518,519],"minio","ecs","s3","存储","/blogs/ecs-install-minio",{"title":239,"description":512},"blogs/ecs-install-minio","NIX4esX524181zWAxCiBEIQafVJP183igkwXC-kMoV0",1751196003390]